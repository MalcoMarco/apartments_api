import{M as n}from"./index-OZjHP72d.js";const s=document.getElementById("modalEl");let r;if(s){const t={placement:"center",backdrop:"dynamic",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",closable:!0},e={id:"modalEl",override:!0};r=new n(s,t,e)}Alpine.data("apartmentData",()=>({open:!1,apartments:{data:[],links:[]},page:1,per_page:100,sort:null,filter:{level:null,apartment_id:null,price:null,total_amount:null,availability_id:[]},apartmentItem:{id:null,level:1,apartment_id:"",price:"",total_amount:"",availability_id:null,comments:null},modalTitle:"",isformCreate:!1,initApartments(){this.getApartments()},getApartments(){const t=new URLSearchParams;t.append("page",this.page),t.append("per_page",this.per_page),this.sort&&t.append("sort",this.sort);for(const e in this.filter)if(Object.prototype.hasOwnProperty.call(this.filter,e)){const a=this.filter[e];a!=null&&a.length>0&&t.append(`filter[${e}]`,a)}axios.get(`/api/apartments?${t.toString()}`).then(e=>{this.apartments=e.data})},orderBy(t){this.sort=t,this.getApartments()},resetColum(t){this.filter[t]=null,this.getApartments()},search(){this.page=1,this.getApartments()},changePage(t){if(console.log(t),t.url!=null&&!t.active){const e=new URL(t.url),a=new URLSearchParams(e.search);this.page=a.get("page"),this.getApartments()}},createForm(){this.modalTitle="Crear Nuevo Apartment:",this.apartmentItem={id:null,level:1,apartment_id:"",price:"",total_amount:"",availability_id:null,comments:null},this.isformCreate=!0,r.show()},editForm(t){this.modalTitle="Editar: "+t.apartment_id,this.apartmentItem={...t},this.isformCreate=!1,r.show()},storeForm(){let t={method:"post",url:"/dashboard/apartments",data:{...this.apartmentItem}};this.isformCreate||(t.method="put",t.url+=`/${this.apartmentItem.apartment_id}`),axios(t).then(e=>{toastr.success(e.data.message),this.getApartments(),r.hide()}).catch(e=>{toastr.warning(e.response.data.message,"Error",{timeOut:8e3})})},deleteApartment(t){Swal.fire({title:"Estas Seguro?",text:"Se eliminara el apartment: "+t,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"SÃ­, Eliminar!"}).then(e=>{e.isConfirmed&&axios.delete(`/dashboard/apartments/${t}`).then(a=>{toastr.success(a.data.message),this.getApartments()}).catch(a=>{toastr.warning(a.response.data.message,"Error")})})},closeForm(){r.hide()}}));
